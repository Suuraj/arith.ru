(()=>{"use strict";var e,t,r,n,a,l,s={4711(e,t,r){var n=r(4848),a=r(6540),l=r(5338),s=r(5570),o=r(2600),i=r(8909);let c=async(e,t,r)=>{await i.A.post("https://arith-ru.onrender.com/set",{date:e,result:t,questionCount:r},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).catch(e=>{})},d=async e=>{await i.A.get("https://arith-ru.onrender.com/get",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:{questionCount:e}}).then(t=>(localStorage.setItem("results"+e,JSON.stringify(t.data)),t.data)).catch(e=>[])},u=async e=>{await i.A.get("https://arith-ru.onrender.com/leaders",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:{questionCount:e}}).then(t=>{localStorage.setItem("leaderboard"+e,JSON.stringify({leaders:t.data,date:new Date}))}).catch(e=>{})},h=(0,a.createContext)(null),m=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[s,o]=(0,a.useState)(!0),c=()=>{localStorage.clear(),l(null)};return(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");e?await i.A.get("https://arith-ru.onrender.com/auth",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>l(e.data.username)).catch(()=>c()).finally(()=>o(!1)):o(!1)})()},[]),(0,n.jsx)(h.Provider,{value:{username:r,login:(e,t)=>{localStorage.setItem("token",t),l(e)},logout:c,loading:s,isAuth:!!r},children:!s&&t})},x=()=>(0,a.useContext)(h),j=e=>{let{username:t}=x();if(!e.leaders)return null;let r={hour:"numeric",minute:"numeric",second:"numeric",year:"numeric",month:"numeric",day:"numeric"};return e.leaders.map(e=>(0,n.jsxs)("tr",{className:e.username==t?"currentUser-hiaB_9":null,children:[(0,n.jsx)("td",{children:e.username}),(0,n.jsx)("td",{children:new Intl.DateTimeFormat("default",r).format(new Date(e.date))}),(0,n.jsx)("td",{children:e.result})]}))};var g=r(312),p=r.n(g);let v={active:"active-J8M3TG"};var f=r(2133),b=r(1252),y=r(9107),S=r(7984),w=r(3495),k=r(3212),C=r(606),O=r(2822);let N=e=>(0,n.jsx)("input",(0,O._)({onChange:t=>e.setValue(t.target.value)},e)),A={},I=e=>e&&/^[a-zA-Z]{3,15}$/.test(e),z=e=>{let{children:t}=e,{username:r,isAuth:a}=x();return a&&!I(r)?(0,n.jsx)(s.C5,{to:"/username",replace:!0}):t},M=(0,s.Ys)([{path:"/",element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{children:(0,n.jsx)(()=>{let{isAuth:e}=x();return(0,n.jsx)("nav",{id:v.menu,children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:(0,n.jsx)(s.k2,{end:!0,to:"/",className:e=>{let{isActive:t}=e;return t?v.active:void 0},children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:[(0,n.jsx)("path",{d:"m 8 3.293 l 6 6 V 13.5 a 1.5 1.5 0 0 1 -1.5 1.5 h -9 A 1.5 1.5 0 0 1 2 13.5 V 9.293 l 6 -6 z"}),(0,n.jsx)("path",{d:"M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"})]})})}),(0,n.jsx)("li",{children:(0,n.jsx)(s.k2,{to:"/leaderboard",className:e=>{let{isActive:t}=e;return t?v.active:void 0},children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:(0,n.jsx)("path",{d:"m 1 10 h 4 v 5 H 1 v -5 z M 6 1 h 4 v 14 H 6 V 1 z m 5 5 h 4 v 9 h -4 V 6 z"})})})}),(0,n.jsx)("li",{children:(0,n.jsx)(s.k2,{to:e?"/profile":"/signin",className:e=>{let{isActive:t}=e;return t?v.active:void 0},children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:[(0,n.jsx)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,n.jsx)("path",{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})]})})})]})})},{})}),(0,n.jsx)(s.sv,{}),(0,n.jsx)("footer",{})]}),children:[{index:!0,element:(0,n.jsx)(z,{children:(0,n.jsx)(()=>{var e,t;let r,[l,s]=(0,a.useState)("1 + 1"),[o,i]=(0,a.useState)(0),[d,u]=(0,a.useState)(),[h,m]=(0,a.useState)(!1),[x,j]=(0,a.useState)(),g=null!=(e=localStorage.getItem("questionCount"))?e:50,v=null!=(t=JSON.parse(localStorage.getItem("results"+g)))?t:[],f=()=>Math.floor(9*Math.random())+1,b=e=>{var t,n;r+=null!=(t=null==(n=e.target)?void 0:n.innerText)?t:e;let a=(()=>{let[e,t]=l.split("+");return+e+ +t+""})();a.startsWith(r)&&a==r?(()=>{let e,t;if(o==g){let e=new Date,t={date:e,result:(e-d)/1e3};v.push(t),localStorage.setItem("results"+g,JSON.stringify(v)),m(!0),c(t.date,t.result,g),y();return}d||u(new Date),r="",e=f(),t=f(),s("".concat(e," + ").concat(t)),i(o+1)})():(!a.startsWith(r)||r.length>=a.length)&&(r="",j("incorrect-JmnDRb"),setTimeout(()=>{j()},250))},y=()=>{r="",u(),s("1 + 1"),i(0)},S=e=>{isFinite(e.key)&&32!=e.keyCode&&b(e.key),35==e.keyCode&&y()};return(0,a.useEffect)(()=>(r="",document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)})),(0,n.jsxs)("main",{id:"main-rBiqHI",children:[(0,n.jsxs)("table",{children:[(0,n.jsx)("caption",{id:"question-I296mO",className:x,onClick:y,children:l}),(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"7"})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"8"})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"9"})})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"4"})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"5"})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"6"})})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"1"})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"2"})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"button",onClick:b,children:"3"})})]}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"3",children:(0,n.jsx)("span",{id:"btn0-L7O8k9",className:"button",onClick:b,children:"0"})})})]}),(0,n.jsx)("tfoot",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("td",{id:"counter-j8lj52",colSpan:"3",children:"".concat(o,"/").concat(g)})})})]}),(0,n.jsxs)(p(),{isOpen:h,style:{content:{top:"30%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)"}},onRequestClose:()=>m(!1),children:[v.length>0&&(0,n.jsxs)("div",{children:["Your result: ",v[v.length-1].result," sec"]}),(()=>{if(v.length<2)return!1;let e=v[v.length-1].result;return v.every(t=>t.result>=e)})()&&(0,n.jsx)("div",{children:"It's personal best!"}),v.length>1&&(0,n.jsxs)("div",{children:["Previous: ",v[v.length-2].result]})]})]})},{})})},{path:"leaderboard",element:(0,n.jsx)(z,{children:(0,n.jsx)(()=>{var e,t;let[r,l]=(0,a.useState)(null!=(e=localStorage.getItem("questionCount"))?e:50),s=null!=(t=JSON.parse(localStorage.getItem("leaderboard"+r)))?t:[],o=e=>{e>0&&e<101&&l(e)};return(0,a.useEffect)(()=>{(s.length<1||new Date-new Date(s.date)>3e5)&&u(r)}),(0,n.jsx)("main",{children:(0,n.jsxs)("table",{id:"leaderboard-Y9vhMq",children:[(0,n.jsxs)("caption",{children:[(0,n.jsx)("h2",{children:"Leaderboard"}),(0,n.jsxs)("h3",{children:["Questions: ",r]}),(0,n.jsx)("span",{className:"button",onClick:()=>o(r-1),children:"Prev"}),"|",(0,n.jsx)("span",{className:"button",onClick:()=>o(+r+1),children:"Next"})]}),(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Username"}),(0,n.jsx)("th",{children:"Date"}),(0,n.jsx)("th",{children:"Result (sec)"})]})}),(0,n.jsx)("tbody",{children:(0,n.jsx)(j,{leaders:s.leaders})})]})})},{})})},{path:"signin",element:(0,n.jsx)(e=>{let{children:t}=e,{isAuth:r}=x();return r?(0,n.jsx)(s.C5,{to:"/profile",replace:!0}):t},{children:(0,n.jsx)(()=>{let{login:e}=x(),t=(0,s.Zp)(),r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{window.onTelegramAuth=async r=>{try{let n=await i.A.post("https://arith-ru.onrender.com/signin",r);e(n.data.username,n.data.token),/^[a-zA-Z]{3,15}$/.test(n.data.username)?t("/profile"):t("/username")}catch(e){alert("Failed to sign in")}};let n=document.createElement("script");return n.src="https://telegram.org/js/telegram-widget.js?22",n.async=!0,n.setAttribute("data-telegram-login","arithrubot"),n.setAttribute("data-size","large"),n.setAttribute("data-radius","0"),n.setAttribute("data-onauth","onTelegramAuth(user)"),r.current&&r.current.appendChild(n),()=>{r.current&&(r.current.innerHTML=""),delete window.onTelegramAuth}},[e]),(0,n.jsxs)("main",{children:[(0,n.jsx)("h2",{children:"Sign in"}),(0,n.jsx)("div",{ref:r})]})},{})})},{path:"profile",element:(0,n.jsx)(e=>{let{children:t}=e,{username:r,isAuth:a}=x();return a?I(r)?t:(0,n.jsx)(s.C5,{to:"/username",replace:!0}):(0,n.jsx)(s.C5,{to:"/signin",replace:!0})},{children:(0,n.jsx)(()=>{var e;let{username:t,logout:r}=x(),[l,s]=(0,a.useState)([]),[o,i]=(0,a.useState)(null!=(e=localStorage.getItem("questionCount"))?e:50),c=e=>"auto"===e?null:new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric",second:"numeric",year:"numeric",month:"numeric",day:"numeric"}).format(new Date(e));return(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("results"+o);e&&"[]"!==e?s(JSON.parse(e)):s(await d(o)||[])})()},[o]),(0,n.jsxs)("main",{id:A.main,children:[(0,n.jsx)("h2",{children:t}),(0,n.jsx)("label",{htmlFor:"count",children:(0,n.jsx)("h3",{children:"Questions:"})}),(0,n.jsx)(N,{type:"number",name:"count",value:o,setValue:i,onInput:e=>{let t=e.target.value;t=(t=t<1?1:t)>100?100:t,localStorage.setItem("questionCount",t)},min:"1",max:"100"}),(0,n.jsx)(f.u,{height:400,children:(0,n.jsxs)(b.b,{data:l,margin:{top:20,right:20,bottom:20,left:0},children:[(0,n.jsx)(y.d,{vertical:!1}),(0,n.jsx)(S.W,{dataKey:"date",tickFormatter:c,dy:15}),(0,n.jsx)(w.h,{domain:["auto","auto"]}),(0,n.jsx)(k.m,{itemStyle:{color:"black",backgroundColor:"white"},labelFormatter:c,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.8)"}}),(0,n.jsx)(C.N1,{dataKey:"result"})]})}),(0,n.jsx)("span",{className:"button",onClick:r,children:"Log out"})]})},{})})},{path:"username",element:(0,n.jsx)(e=>{let{children:t}=e,{username:r}=x();return I(r)?(0,n.jsx)(s.C5,{to:"/profile",replace:!0}):t},{children:(0,n.jsx)(()=>{let e=(0,s.Zp)(),{login:t,logout:r}=x(),[l,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),m=/^[a-zA-Z]{3,15}$/.test(l),j=!m||u,g=c||l.length>0&&!m,p=async()=>{m&&(h(!0),d(!1),await i.A.post("https://arith-ru.onrender.com/username",{username:l},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(r=>{t(r.data.username,r.data.token),e("/profile")}).catch(e=>{var t;(null==(t=e.response)?void 0:t.status)===400?d(!0):alert("Something went wrong")}).finally(()=>h(!1)))};return(0,n.jsxs)("main",{children:[(0,n.jsx)("h2",{children:"Setup username"}),(0,n.jsx)(N,{value:l,setValue:e=>{o(e),d(!1)},className:g?"errorInput":null,type:"text",placeholder:"Username",required:!0}),(0,n.jsxs)("span",{className:"errorAlert ".concat(g?"visible":"hidden"),children:[c&&"Username already taken","â€‹",l.length>0&&!m&&"Latin alphabet only (at least 3 letters)"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:j?null:p,children:"Save"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"",onClick:()=>{r(),e("/signin")},children:"Log out"})]})]})},{})})}]}]);l.createRoot(document.getElementById("root")).render((0,n.jsx)(a.StrictMode,{children:(0,n.jsx)(function(){return(0,n.jsx)(m,{children:(0,n.jsx)(o.pg,{router:M})})},{})}))}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return s[e].call(r.exports,r,r.exports,i),r.exports}i.m=s,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(r,n){if(1&n&&(r=this(r)),8&n||"object"==typeof r&&r&&(4&n&&r.__esModule||16&n&&"function"==typeof r.then))return r;var a=Object.create(null);i.r(a);var l={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>{l[e]=()=>r[e]});return l.default=()=>r,i.d(a,l),a},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r=[],i.O=(e,t,n,a)=>{if(t){a=a||0;for(var l=r.length;l>0&&r[l-1][2]>a;l--)r[l]=r[l-1];r[l]=[t,n,a];return}for(var s=1/0,l=0;l<r.length;l++){for(var t=r[l][0],n=r[l][1],a=r[l][2],o=!0,c=0;c<t.length;c++)(!1&a||s>=a)&&Object.keys(i.O).every(e=>i.O[e](t[c]))?t.splice(c--,1):(o=!1,a<s&&(s=a));if(o){r.splice(l--,1);var d=n();void 0!==d&&(e=d)}}return e},n={410:0},i.O.j=e=>0===n[e],a=(e,t)=>{var r,a,l=t[0],s=t[1],o=t[2],c=0;if(l.some(e=>0!==n[e])){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(o)var d=o(i)}for(e&&e(t);c<l.length;c++)a=l[c],i.o(n,a)&&n[a]&&n[a][0](),n[a]=0;return i.O(d)},(l=self.webpackChunkarith_ru=self.webpackChunkarith_ru||[]).forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l));var c=i.O(void 0,["783","535","354","820"],()=>i(4711));c=i.O(c)})();